window.__require=function e(t,n,a){function o(i,c){if(!n[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var m="function"==typeof __require&&__require;if(!c&&m)return m(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+i+"'")}}var p=n[i]={exports:{}};t[i][0].call(p.exports,function(e){return o(t[i][1][e]||e)},p,p.exports,e,t,n,a)}return n[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<a.length;i++)o(a[i]);return o}({Bomb:[function(e,t,n){"use strict";cc._RF.push(t,"a88daIGj/ZCH79Zk884gXDq","Bomb"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./ShopItemManager"),o=e("./GameManager"),r=cc._decorator,i=r.ccclass,c=r.property,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.explodeThings,this,!0)},t.prototype.explodeThings=function(){var e=o.GameManager.Instance(o.GameManager);this.hookItem=e.hookItem,e.catchItem=null,a.ShopItemManager.Instance(a.ShopItemManager).reduceBombCount(),a.ShopItemManager.Instance(a.ShopItemManager).refreshDisplay(),this.hookItem.removeAllChildren();var t=cc.instantiate(this.explodePrefab);t.parent=this.hookItem,t.setPosition(cc.v2(0,0)),e.ropeSpeed=e.normalRopeSpeed,e.ropeState=e.ROPE_STATE.REDUCE},__decorate([c(cc.Prefab)],t.prototype,"explodePrefab",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./GameManager":"GameManager","./ShopItemManager":"ShopItemManager"}],GameManager:[function(e,t,n){"use strict";cc._RF.push(t,"9c1448rYClGUqJUrUlqiYN3","GameManager"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Singleton"),o=e("./ShopItemManager"),r=function(e){function t(){var t=e.call(this)||this;return t.money=0,t.catchItem=null,t.remainTime=60,t.normalRopeSpeed=100,t.moneyRequired=[0,60,500,1e3,1500,2e3,2500,3e3,3500],t.ROPE_STATE=cc.Enum({ADD:1,REDUCE:2,WAIT:3}),t.level=0,t.targetMoneyLabel=cc.find("UI/goal-money-banner/targetMoneyLabel").getComponent(cc.Label),t.currentMoneyLabel=cc.find("UI/goal-money-banner/currentMoneyLabel").getComponent(cc.Label),t.levelLabel=cc.find("UI/level-time-banner/levelLabel").getComponent(cc.Label),t.timeLabel=cc.find("UI/level-time-banner/timeLabel").getComponent(cc.Label),t.endGamePanel=cc.find("UI/dialog-background"),t.btnLabel=cc.find("button/btnLabel",t.endGamePanel).getComponent(cc.Label),t.tipLabel=cc.find("tipLabel",t.endGamePanel).getComponent(cc.Label),t.targetMoneyLabel.string="0",t.level=cc.sys.localStorage.getItem("level")||1,t.level>t.moneyRequired.length-1&&(t.level=t.moneyRequired.length-1),t.targetMoneyLabel.string=t.moneyRequired[t.level].toString(),t.levelLabel.string=t.level.toString(),t.minerAnimation=cc.find("minerCar").getComponent(cc.Animation),t.shopPanel=cc.find("shop-panel"),t.hookItem=cc.find("minerCar/Hook/item"),t}return __extends(t,e),t.prototype.increseMoney=function(e){void 0===e&&(e=10),this.money+=e,this.updateUI(),this.money>=this.moneyRequired[this.level]&&(this.level=Number(this.level)+1,this.level>this.moneyRequired.length-1&&(this.level=this.moneyRequired.length-1),cc.sys.localStorage.setItem("level",this.level),o.ShopItemManager.Instance(o.ShopItemManager).isStrengthUp=!1,this.shopPanel.active=!0)},t.prototype.updateUI=function(){this.levelLabel.string=this.level.toString(),this.targetMoneyLabel.string=this.moneyRequired[this.level].toString(),this.currentMoneyLabel.string=this.money.toString(),this.timeLabel.string=t.Instance(t).remainTime.toString()},t.prototype.gameOver=function(){this.endGamePanel.active=!0,this.btnLabel.string="\u91cd\u6765",this.tipLabel.string="\u5931\u8d25\u4e86"},t.prototype.playAnim=function(e){void 0===e&&(e=""),this.minerAnimation.play(e).wrapMode=cc.WrapMode.Loop},t.prototype.stopAnim=function(){this.minerAnimation.stop()},t}(a.Singleton);n.GameManager=r,cc._RF.pop()},{"./ShopItemManager":"ShopItemManager","./Singleton":"Singleton"}],Game:[function(e,t,n){"use strict";cc._RF.push(t,"0f374BaBk5HaIRqhH6iJmtD","Game"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./MineItem"),o=e("./GameManager"),r=e("./ShopItemManager"),i=cc._decorator,c=i.ccclass,s=i.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.itemPrefabs=[],t}return __extends(t,e),t.prototype.onLoad=function(){this.prefabsByName={};var e=this;this.itemPrefabs.forEach(function(t){e.prefabsByName[t.name]=t}),r.ShopItemManager.Instance(r.ShopItemManager).bombCount=cc.sys.localStorage.getItem("bombCount")||0,r.ShopItemManager.Instance(r.ShopItemManager).stoneValueUpCount=cc.sys.localStorage.getItem("stoneValueUpCount")||0,r.ShopItemManager.Instance(r.ShopItemManager).refreshDisplay(),this.generateItems(),this.initGame(),this.startTime()},t.prototype.generateItems=function(){var e=this;cc.loader.loadRes("MineItems",function(t,n){e.itemStat=n.json,e.generateList=[{name:"gold-0-0",count:1},{name:"diamond",count:1},{name:"TNT",count:1},{name:"gold-0-5",count:1},{name:"stone-0",count:1}],e.generateList.forEach(function(t,n){e.generateList[n].count=e.randomNum(1,3)});var o=cc.sys.localStorage.getItem("level")||1;e.generateList[1].count+=Number(o);var i=r.ShopItemManager.Instance(r.ShopItemManager).isStrengthUp;e.generateList.forEach(function(t){for(var n=1;n<=t.count;n++){var o=cc.instantiate(e.prefabsByName[t.name]);o.getComponent(a.MineItem).score=e.itemStat[t.name].score,o.getComponent(a.MineItem).speed=i?100:e.itemStat[t.name].speed,o.parent=e.node;var r=e.randomXY();o.setPosition(r)}})})},t.prototype.moveMineCar=function(){var e=this.node.width/2+o.GameManager.Instance(o.GameManager).mineCar.width/2;o.GameManager.Instance(o.GameManager).playAnim("minerMove"),cc.tween(o.GameManager.Instance(o.GameManager).mineCar).to(3,{position:cc.v2(e,500)}).call(function(){o.GameManager.Instance(o.GameManager).stopAnim()}).start()},t.prototype.reloadGame=function(){cc.game.resume(),this.startTime();var e=this;cc.director.loadScene("main",function(){o.GameManager.Instance(o.GameManager).hookItem=cc.find("minerCar/Hook/item"),o.GameManager.Instance(o.GameManager).minerAnimation=cc.find("minerCar").getComponent(cc.Animation),cc.find("UI/dialog-background/button").on(cc.Node.EventType.TOUCH_START,e.reloadGame,e,!0),o.GameManager.Instance(o.GameManager).shopPanel=cc.find("shop-panel"),o.GameManager.Instance(o.GameManager).catchItem=null,o.GameManager.Instance(o.GameManager).endGamePanel=cc.find("UI/dialog-background"),r.ShopItemManager.Instance(r.ShopItemManager).tipLabel=cc.find("shop-panel/shop-desk/tipLabel").getComponent(cc.Label)}),clearInterval(o.GameManager.Instance(o.GameManager).timer),o.GameManager.Instance(o.GameManager).remainTime=60},t.prototype.initGame=function(){o.GameManager.Instance(o.GameManager).catchItem=null,o.GameManager.Instance(o.GameManager).shopPanel=cc.find("shop-panel"),o.GameManager.Instance(o.GameManager).hookItem=cc.find("minerCar/Hook/item"),o.GameManager.Instance(o.GameManager).minerAnimation=cc.find("minerCar").getComponent(cc.Animation),cc.find("UI/dialog-background/button").on(cc.Node.EventType.TOUCH_START,this.reloadGame,this,!0)},t.prototype.startTime=function(){var e=o.GameManager.Instance(o.GameManager);clearInterval(e.timer),e.timer=setInterval(function(){e.remainTime--,e.remainTime<0&&(e.remainTime=0),e.timeLabel.string=e.remainTime.toString(),e.remainTime<=0&&(o.GameManager.Instance(o.GameManager).gameOver(),clearInterval(e.timer))},1e3)},t.prototype.randomXY=function(){var e=this.randomNum(30,this.node.width-100),t=this.randomNum(30,this.node.height-100);return cc.v2(e,t)},t.prototype.randomNum=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},t.prototype.setBuyItemIndex=function(e,t){e.currentTarget.parent.children.forEach(function(e,n){cc.find("back",e).active=t==n});var n=r.ShopItemManager.Instance(r.ShopItemManager);n.buyItemIndex=t,n.tipLabel.string=n.itemDescText[t]},t.prototype.buyItem=function(){r.ShopItemManager.Instance(r.ShopItemManager).buyItem()},__decorate([s(cc.Label)],t.prototype,"label",void 0),__decorate([s([cc.Prefab])],t.prototype,"itemPrefabs",void 0),t=__decorate([c],t)}(cc.Component);n.default=m,cc._RF.pop()},{"./GameManager":"GameManager","./MineItem":"MineItem","./ShopItemManager":"ShopItemManager"}],HookCollider:[function(e,t,n){"use strict";cc._RF.push(t,"96c94B2UmZHV7625GDGkqAW","HookCollider"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Hook"),o=e("./GameManager"),r=e("./MineItem"),i=e("./ShopItemManager"),c=cc._decorator,s=c.ccclass,m=c.property,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){},t.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this.hookScript=this.node.parent.getComponent(a.Hook)},t.prototype.onCollisionEnter=function(e,t){if("tnt"==e.node.group){var n=cc.instantiate(this.endExplodePaticle);return n.parent=this.node,n.setPosition(cc.v2(0,0)),e.node.destroy(),void setTimeout(function(){o.GameManager.Instance(o.GameManager).endGamePanel.active=!0},1e3)}"wall"==e.node.group?this.hookScript.ropeState=2:o.GameManager.Instance(o.GameManager).catchItem||(o.GameManager.Instance(o.GameManager).catchItem=e.node.getComponent(r.MineItem),o.GameManager.Instance(o.GameManager).ropeSpeed=o.GameManager.Instance(o.GameManager).catchItem.speed,e.node.parent=this.node,this.other=e,e.node.x=0,e.node.y=0)},t.prototype.explodeThings=function(){var e=o.GameManager.Instance(o.GameManager);e.catchItem=null,i.ShopItemManager.Instance(i.ShopItemManager).reduceBombCount(),i.ShopItemManager.Instance(i.ShopItemManager).refreshDisplay(),this.node.removeAllChildren();var t=cc.instantiate(this.explodePrefab);t.parent=this.node,t.setPosition(cc.v2(0,0)),e.ropeSpeed=e.normalRopeSpeed,e.ropeState=e.ROPE_STATE.REDUCE},__decorate([m(cc.Prefab)],t.prototype,"explodePrefab",void 0),__decorate([m(cc.Prefab)],t.prototype,"endExplodePaticle",void 0),t=__decorate([s],t)}(cc.Component);n.HookCollider=p,cc._RF.pop()},{"./GameManager":"GameManager","./Hook":"Hook","./MineItem":"MineItem","./ShopItemManager":"ShopItemManager"}],Hook:[function(e,t,n){"use strict";cc._RF.push(t,"ec156WcychAy5IveTYwV/DU","Hook"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./GameManager"),o=e("./HookCollider"),r=e("./ShopItemManager"),i=cc._decorator,c=i.ccclass,s=i.property,m=cc.Enum({ADD:1,REDUCE:2,WAIT:3}),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isRotating=!0,t.rotateSpeed=60,t}return __extends(t,e),t.prototype.start=function(){this.gameManager=a.GameManager.Instance(a.GameManager),this.gameManager.updateUI(),this.gameManager.endGamePanel.active=!1,this.gameManager.ropeSpeed=this.gameManager.normalRopeSpeed,this.gameManager.ropeState=m.WAIT,this.ropeSpeed=a.GameManager.Instance(a.GameManager).ropeSpeed,this.node.angle=-50,this.canvas=cc.find("Canvas"),this.ropeOriginalHeight=this.node.height,this.hookColliderScript=this.hookItem.getComponent(o.HookCollider),this.canvas.on(cc.Node.EventType.TOUCH_END,this.sendHook.bind(this))},t.prototype.update=function(e){this.rotateHook(e),this.hookLengthen(e)},t.prototype.rotateHook=function(e){this.isRotating&&(this.node.angle>=60?this.rotateSpeed=-this.rotateSpeed:this.node.angle<=-60&&(this.rotateSpeed=Math.abs(this.rotateSpeed)),this.node.angle+=this.rotateSpeed*e)},t.prototype.sendHook=function(){this.isRotating=!1,this.gameManager.ropeState==m.ADD&&(this.gameManager.ropeState=m.REDUCE,a.GameManager.Instance(a.GameManager).catchItem&&a.GameManager.Instance(a.GameManager).playAnim("pullHeavy")),this.gameManager.ropeState==m.WAIT&&(this.gameManager.ropeState=m.ADD)},t.prototype.hookLengthen=function(e){if(this.gameManager.ropeState==m.ADD)this.node.height+=100*e;else if(this.gameManager.ropeState==m.REDUCE&&(this.node.height-=a.GameManager.Instance(a.GameManager).ropeSpeed*e,this.node.height<=this.ropeOriginalHeight)){this.gameManager.ropeState=m.WAIT,this.isRotating=!0,this.node.height=this.ropeOriginalHeight,this.node.angle=0;var t=a.GameManager.Instance(a.GameManager);if(t.ropeSpeed=100,t.stopAnim(),t.catchItem){var n=t.catchItem.score;cc.log(t.catchItem),-1!==t.catchItem.name.indexOf("stone")&&r.ShopItemManager.Instance(r.ShopItemManager).stoneValueUpCount>0&&(r.ShopItemManager.Instance(r.ShopItemManager).stoneValueUpCount-=1,n*=3),t.increseMoney(n),t.catchItem=null,this.hookItem.removeAllChildren()}}},t.prototype.randomNum=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},__decorate([s(cc.Node)],t.prototype,"hookItem",void 0),t=__decorate([c],t)}(cc.Component);n.Hook=p,cc._RF.pop()},{"./GameManager":"GameManager","./HookCollider":"HookCollider","./ShopItemManager":"ShopItemManager"}],MineItem:[function(e,t,n){"use strict";cc._RF.push(t,"e1d48mVXslJe6UxWEmehRsM","MineItem"),Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,o=a.ccclass,r=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){},t.prototype.setScore=function(e){void 0===e&&(e=10),this.score=e},t.prototype.onCollisionEnter=function(e,t){},t.prototype.update=function(e){},t=__decorate([o],t)}(cc.Component));n.MineItem=r,cc._RF.pop()},{}],PesistNode:[function(e,t,n){"use strict";cc._RF.push(t,"3f288kfnjFGOJdAsv9aPuQ7","PesistNode"),Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,o=a.ccclass,r=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node)},t=__decorate([o],t)}(cc.Component));n.default=r,cc._RF.pop()},{}],ShopItemManager:[function(e,t,n){"use strict";cc._RF.push(t,"cae32O8+wZIua//4FW0+DRm","ShopItemManager"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./GameManager"),o=function(e){function t(){var t=e.call(this)||this;return t.stoneValueUpCount=0,t.isStrengthUp=!1,t.buyItemIndex=0,t.itemDescText=["\u5f53\u4f60\u62c9\u8d77\u6bd4\u8f83\u91cd\u7684\u7269\u54c1\u65f6\uff0c\u53ef\u4ee5\u70b8\u6bc1\u4ee5\u8282\u7701\u65f6\u95f4(100\u91d1\u5e01)","\u63a5\u4e0b\u6765\u76843\u4e2a\u77f3\u5934\u53d8\u5f97\u66f4\u6709\u4ef7\u503c\uff0c\u4ef7\u683c\u53d8\u62103\u500d(50\u91d1\u5e01)","\u53d8\u5f97\u5f3a\u58ee\uff0c\u62c9\u91cd\u7269\u4e0d\u8d39\u529b,\u6301\u7eed\u4e00\u56de\u5408(100\u91d1\u5e01)"],t.maxBombCount=4,t.bombsSheet=cc.find("bombsSheet"),t.tipLabel=cc.find("shop-panel/shop-desk/tipLabel").getComponent(cc.Label),t}return __extends(t,e),t.prototype.addBombCount=function(){this.bombCount<this.maxBombCount&&a.GameManager.Instance(a.GameManager).money>100&&(a.GameManager.Instance(a.GameManager).money-=100,this.bombCount++,cc.sys.localStorage.setItem("bombCount",this.bombCount),this.refreshDisplay())},t.prototype.reduceBombCount=function(){this.bombCount>=0&&(this.bombCount--,this.refreshDisplay())},t.prototype.refreshDisplay=function(){this.bombsSheet.children.forEach(function(e){e.active=!1});for(var e=0;e<this.bombCount;e++)this.bombsSheet.children[e].active=!0},t.prototype.buyItem=function(){switch(Number(this.buyItemIndex)){case 0:t.Instance(t).addBombCount();break;case 1:t.Instance(t).stoneValueUpCount=Number(t.Instance(t).stoneValueUpCount)+3,cc.log(t.Instance(t).stoneValueUpCount),cc.sys.localStorage.setItem("stoneValueUpCount",t.Instance(t).stoneValueUpCount),a.GameManager.Instance(a.GameManager).money-=50;break;case 2:t.Instance(t).isStrengthUp=!0,a.GameManager.Instance(a.GameManager).money-=100}},t}(e("./Singleton").Singleton);n.ShopItemManager=o,cc._RF.pop()},{"./GameManager":"GameManager","./Singleton":"Singleton"}],Singleton:[function(e,t,n){"use strict";cc._RF.push(t,"a3691kOhSNFdJjqkWwMn6Cw","Singleton"),Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(){}return e.Instance=function(e){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.init=function(){},e.instance=null,e}();n.Singleton=a,cc._RF.pop()},{}],UI:[function(e,t,n){"use strict";cc._RF.push(t,"46d2epbaNJIcYyKC/0Y3eUQ","UI"),Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,o=a.ccclass,r=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){cc.game.addPersistRootNode(this.node)},t.prototype.restartGame=function(){cc.director.loadScene("main")},t.prototype.resetLevel=function(){cc.sys.localStorage.setItem("level",1),cc.sys.localStorage.setItem("bombCount",0),cc.sys.localStorage.setItem("stoneValueUpCount",0)},t=__decorate([o],t)}(cc.Component));n.default=r,cc._RF.pop()},{}]},{},["Bomb","Game","GameManager","Hook","HookCollider","MineItem","PesistNode","ShopItemManager","Singleton","UI"]);